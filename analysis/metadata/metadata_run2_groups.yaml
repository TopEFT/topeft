# Canonical Run-2 channel groups ported from topeft/channels/ch_lst.json
channels:
  groups:
    OFFZ_TAU_SPLIT_CH_LST_SR:
      description: Canonical trilepton off-Z split layout with low/high/none bins
        restricted to central jets and tau-neutral selections.
      features:
      - offz_split
      - requires_central
      regions:
      - lepton_category: 3l
        lepton_flavors:
        - eee
        - eem
        - emm
        - mmm
        region_definitions:
        - name: 3l_m_offZ_low_1b
          channel: 3l_m
          subchannel: 3l_offZ_low
          tags:
          - bmask_exactly1m
          - ~fwdjet_mask
          - 0tau
        - name: 3l_m_offZ_high_1b
          channel: 3l_m
          subchannel: 3l_offZ_high
          tags:
          - bmask_exactly1m
          - ~fwdjet_mask
          - 0tau
        - name: 3l_m_offZ_none_1b
          channel: 3l_m
          subchannel: 3l_offZ_none
          tags:
          - bmask_exactly1m
          - ~fwdjet_mask
          - 0tau
          histogram_variables:
            exclude:
            - ptz
        - name: 3l_m_offZ_low_2b
          channel: 3l_m
          subchannel: 3l_offZ_low
          tags:
          - bmask_atleast2m
          - ~fwdjet_mask
          - 0tau
        - name: 3l_m_offZ_high_2b
          channel: 3l_m
          subchannel: 3l_offZ_high
          tags:
          - bmask_atleast2m
          - ~fwdjet_mask
          - 0tau
        - name: 3l_m_offZ_none_2b
          channel: 3l_m
          subchannel: 3l_offZ_none
          tags:
          - bmask_atleast2m
          - ~fwdjet_mask
          - 0tau
          histogram_variables:
            exclude:
            - ptz
        - name: 3l_p_offZ_low_1b
          channel: 3l_p
          subchannel: 3l_offZ_low
          tags:
          - bmask_exactly1m
          - ~fwdjet_mask
          - 0tau
        - name: 3l_p_offZ_high_1b
          channel: 3l_p
          subchannel: 3l_offZ_high
          tags:
          - bmask_exactly1m
          - ~fwdjet_mask
          - 0tau
        - name: 3l_p_offZ_none_1b
          channel: 3l_p
          subchannel: 3l_offZ_none
          tags:
          - bmask_exactly1m
          - ~fwdjet_mask
          - 0tau
          histogram_variables:
            exclude:
            - ptz
        - name: 3l_p_offZ_low_2b
          channel: 3l_p
          subchannel: 3l_offZ_low
          tags:
          - bmask_atleast2m
          - ~fwdjet_mask
          - 0tau
        - name: 3l_p_offZ_high_2b
          channel: 3l_p
          subchannel: 3l_offZ_high
          tags:
          - bmask_atleast2m
          - ~fwdjet_mask
          - 0tau
        - name: 3l_p_offZ_none_2b
          channel: 3l_p
          subchannel: 3l_offZ_none
          tags:
          - bmask_atleast2m
          - ~fwdjet_mask
          - 0tau
          histogram_variables:
            exclude:
            - ptz
        histogram_variables:
          exclude:
          - ptz_wtau
          - tau0pt
        jet_bins:
        - =2
        - =3
        - =4
        - '>5'
        application_tags:
          mc:
          - isSR_3l
          - isAR_3l

    ALL_CH_LST_SR:
      description: Superset Run-2 SR layout combining baseline, tau, and forward
        variations.
      features:
      - all_split
      regions:
      - lepton_category: 2l
        lepton_flavors:
        - ee
        - em
        - mm
        region_definitions:
        - name: 2lss_p
          channel: 2lss
          subchannel: 2l_p
          tags:
          - bmask_atleast1m2l
          - bmask_atmost2m
          - ~fwdjet_mask
          - 0tau
        - name: 2lss_m
          channel: 2lss
          subchannel: 2l_m
          tags:
          - bmask_atleast1m2l
          - bmask_atmost2m
          - ~fwdjet_mask
          - 0tau
        - name: 2lss_4t_p
          channel: 2lss
          subchannel: 2l_p
          tags:
          - bmask_atleast1m2l
          - bmask_atleast3m
          - 0tau
        - name: 2lss_4t_m
          channel: 2lss
          subchannel: 2l_m
          tags:
          - bmask_atleast1m2l
          - bmask_atleast3m
          - 0tau
        - name: 2lss_fwd_p
          channel: 2lss_fwd
          subchannel: 2l_fwd_p
          tags:
          - bmask_atleast1m2l
          - bmask_atmost2m
          - fwdjet_mask
          - 0tau
        - name: 2lss_fwd_m
          channel: 2lss_fwd
          subchannel: 2l_fwd_m
          tags:
          - bmask_atleast1m2l
          - bmask_atmost2m
          - fwdjet_mask
          - 0tau
        jet_bins:
        - =4
        - =5
        - =6
        - '>7'
        histogram_variables:
          exclude:
          - ptz
          - ptz_wtau
          - tau0pt
        application_tags:
          mc:
          - isSR_2lSS
          - isAR_2lSS
          data:
          - isAR_2lSS_OS
      - lepton_category: 2lss_1tau
        lepton_flavors:
        - ee
        - em
        - mm
        region_definitions:
        - name: 2lss_m_1tau_onZ
          channel: 2lss
          subchannel: 2l_m
          tags:
          - bmask_atleast1m2l
          - 1tau
          - onZ_tau
        - name: 2lss_p_1tau_offZ
          channel: 2lss
          subchannel: 2l_p
          tags:
          - bmask_atleast1m2l
          - 1tau
          - offZ_tau
        - name: 2lss_m_1tau_offZ
          channel: 2lss
          subchannel: 2l_m
          tags:
          - bmask_atleast1m2l
          - 1tau
          - offZ_tau
        - name: 2lss_p_1tau_onZ
          channel: 2lss
          subchannel: 2l_p
          tags:
          - bmask_atleast1m2l
          - 1tau
          - onZ_tau
        jet_bins:
        - =3
        - =4
        - =5
        - '>6'
        histogram_variables:
          exclude:
          - ptz
        application_tags:
          mc:
          - isSR_2lSS
          - isAR_2lSS
          data:
          - isAR_2lSS_OS
      - lepton_category: 2los_1tau
        lepton_flavors:
        - ee
        - em
        - mm
        region_definitions:
        - name: 2los_onZ_1tau
          channel: 2los
          tags:
          - bmask_atleast2m
          - 1tau
          - 2l_onZ
        jet_bins:
        - '>5'
        application_tags:
          mc:
          - isSR_2lOS
          - isAR_2lOS
      - lepton_category: 3l
        lepton_flavors:
        - eee
        - eem
        - emm
        - mmm
        region_definitions:
        - name: 3l_onZ_1b
          channel: 3l
          subchannel: 3l_onZ
          tags:
          - bmask_exactly1m
          - ~fwdjet_mask
          - 0tau
          histogram_variables:
            exclude:
            - ptz_wtau
            - tau0pt
        - name: 3l_onZ_2b
          channel: 3l
          subchannel: 3l_onZ
          tags:
          - bmask_atleast2m
          - ~fwdjet_mask
          - 0tau
          histogram_variables:
            exclude:
            - ptz_wtau
            - tau0pt
        - name: 3l_1tau_1b
          tags:
          - bmask_exactly1m
          - 1tau
          histogram_variables:
            exclude:
            - ptz
        - name: 3l_1tau_2b
          tags:
          - bmask_atleast2m
          - 1tau
          histogram_variables:
            exclude:
            - ptz
        - name: 3l_m_offZ_low_1b
          channel: 3l_m
          subchannel: 3l_offZ_low
          tags:
          - bmask_exactly1m
          - ~fwdjet_mask
          - 0tau
          histogram_variables:
            exclude:
            - ptz
            - ptz_wtau
            - tau0pt
        - name: 3l_m_offZ_high_1b
          channel: 3l_m
          subchannel: 3l_offZ_high
          tags:
          - bmask_exactly1m
          - ~fwdjet_mask
          - 0tau
          histogram_variables:
            exclude:
            - ptz
            - ptz_wtau
            - tau0pt
        - name: 3l_m_offZ_none_1b
          channel: 3l_m
          subchannel: 3l_offZ_none
          tags:
          - bmask_exactly1m
          - ~fwdjet_mask
          - 0tau
          histogram_variables:
            exclude:
            - ptz
            - ptz_wtau
            - tau0pt
        - name: 3l_m_offZ_low_2b
          channel: 3l_m
          subchannel: 3l_offZ_low
          tags:
          - bmask_atleast2m
          - ~fwdjet_mask
          - 0tau
          histogram_variables:
            exclude:
            - ptz
            - ptz_wtau
            - tau0pt
        - name: 3l_m_offZ_high_2b
          channel: 3l_m
          subchannel: 3l_offZ_high
          tags:
          - bmask_atleast2m
          - ~fwdjet_mask
          - 0tau
          histogram_variables:
            exclude:
            - ptz
            - ptz_wtau
            - tau0pt
        - name: 3l_m_offZ_none_2b
          channel: 3l_m
          subchannel: 3l_offZ_none
          tags:
          - bmask_atleast2m
          - ~fwdjet_mask
          - 0tau
          histogram_variables:
            exclude:
            - ptz
            - ptz_wtau
            - tau0pt
        - name: 3l_p_offZ_low_1b
          channel: 3l_p
          subchannel: 3l_offZ_low
          tags:
          - bmask_exactly1m
          - ~fwdjet_mask
          - 0tau
          histogram_variables:
            exclude:
            - ptz
            - ptz_wtau
            - tau0pt
        - name: 3l_p_offZ_high_1b
          channel: 3l_p
          subchannel: 3l_offZ_high
          tags:
          - bmask_exactly1m
          - ~fwdjet_mask
          - 0tau
          histogram_variables:
            exclude:
            - ptz
            - ptz_wtau
            - tau0pt
        - name: 3l_p_offZ_none_1b
          channel: 3l_p
          subchannel: 3l_offZ_none
          tags:
          - bmask_exactly1m
          - ~fwdjet_mask
          - 0tau
          histogram_variables:
            exclude:
            - ptz
            - ptz_wtau
            - tau0pt
        - name: 3l_p_offZ_low_2b
          channel: 3l_p
          subchannel: 3l_offZ_low
          tags:
          - bmask_atleast2m
          - ~fwdjet_mask
          - 0tau
          histogram_variables:
            exclude:
            - ptz
            - ptz_wtau
            - tau0pt
        - name: 3l_p_offZ_high_2b
          channel: 3l_p
          subchannel: 3l_offZ_high
          tags:
          - bmask_atleast2m
          - ~fwdjet_mask
          - 0tau
          histogram_variables:
            exclude:
            - ptz
            - ptz_wtau
            - tau0pt
        - name: 3l_p_offZ_none_2b
          channel: 3l_p
          subchannel: 3l_offZ_none
          tags:
          - bmask_atleast2m
          - ~fwdjet_mask
          - 0tau
          histogram_variables:
            exclude:
            - ptz
            - ptz_wtau
            - tau0pt
        jet_bins:
        - =1
        - =2
        - =3
        - =4
        - '>5'
        application_tags:
          mc:
          - isSR_3l
          - isAR_3l
      - lepton_category: 3l_fwd
        lepton_flavors:
        - eee
        - eem
        - emm
        - mmm
        region_definitions:
        - name: 3l_onZ_1b_fwd
          channel: 3l
          subchannel: 3l_onZ
          tags:
          - bmask_exactly1m
          - fwdjet_mask
          - 0tau
        - name: 3l_onZ_2b_fwd
          channel: 3l
          subchannel: 3l_onZ
          tags:
          - bmask_atleast2m
          - fwdjet_mask
          - 0tau
        jet_bins:
        - =1
        - =2
        - =3
        - '>4'
        application_tags:
          mc:
          - isSR_3l
          - isAR_3l
      - lepton_category: 3l_offZ_fwd
        lepton_flavors:
        - eee
        - eem
        - emm
        - mmm
        region_definitions:
        - name: 3l_m_offZ_1b_fwd
          channel: 3l_m
          subchannel: 3l_offZ
          tags:
          - bmask_exactly1m
          - fwdjet_mask
          - 0tau
        - name: 3l_p_offZ_1b_fwd
          channel: 3l_p
          subchannel: 3l_offZ
          tags:
          - bmask_exactly1m
          - fwdjet_mask
          - 0tau
        - name: 3l_m_offZ_2b_fwd
          channel: 3l_m
          subchannel: 3l_offZ
          tags:
          - bmask_atleast2m
          - fwdjet_mask
          - 0tau
        - name: 3l_p_offZ_2b_fwd
          channel: 3l_p
          subchannel: 3l_offZ
          tags:
          - bmask_atleast2m
          - fwdjet_mask
          - 0tau
        jet_bins:
        - =1
        - =2
        - =3
        - '>4'
        application_tags:
          mc:
          - isSR_3l
          - isAR_3l
      - lepton_category: 4l
        lepton_flavors:
        - llll
        region_definitions:
        - name: 4l
          channel: 4l
          tags:
          - bmask_atleast1m2l
        jet_bins:
        - =2
        - =3
        - '>4'
        histogram_variables:
          exclude:
          - ptz
          - ptz_wtau
          - tau0pt
        application_tags:
          mc:
          - isSR_4l

    OFFZ_FWD_SPLIT_CH_LST_SR:
      description: Derived off-Z forward-focused group without tau-enriched bins.
      features:
      - offz_split
      - requires_forward
      regions:
      - lepton_category: 2l
        lepton_flavors:
        - ee
        - em
        - mm
        region_definitions:
        - name: 2lss_p
          channel: 2lss
          subchannel: 2l_p
          tags:
          - bmask_atleast1m2l
          - bmask_atmost2m
          - ~fwdjet_mask
        - name: 2lss_m
          channel: 2lss
          subchannel: 2l_m
          tags:
          - bmask_atleast1m2l
          - bmask_atmost2m
          - ~fwdjet_mask
        - name: 2lss_4t_p
          channel: 2lss
          subchannel: 2l_p
          tags:
          - bmask_atleast1m2l
          - bmask_atleast3m
        - name: 2lss_4t_m
          channel: 2lss
          subchannel: 2l_m
          tags:
          - bmask_atleast1m2l
          - bmask_atleast3m
        - name: 2lss_fwd_p
          channel: 2lss_fwd
          subchannel: 2l_fwd_p
          tags:
          - bmask_atleast1m2l
          - bmask_atmost2m
          - fwdjet_mask
        - name: 2lss_fwd_m
          channel: 2lss_fwd
          subchannel: 2l_fwd_m
          tags:
          - bmask_atleast1m2l
          - bmask_atmost2m
          - fwdjet_mask
        jet_bins:
        - =4
        - =5
        - =6
        - '>7'
        histogram_variables:
          exclude:
          - ptz
          - ptz_wtau
          - tau0pt
        application_tags:
          mc:
          - isSR_2lSS
          - isAR_2lSS
          data:
          - isAR_2lSS_OS
      - lepton_category: 3l
        lepton_flavors:
        - eee
        - eem
        - emm
        - mmm
        region_definitions:
        - name: 3l_onZ_1b
          channel: 3l
          subchannel: 3l_onZ
          tags:
          - bmask_exactly1m
          - ~fwdjet_mask
          histogram_variables:
            exclude:
            - ptz_wtau
            - tau0pt
        - name: 3l_onZ_2b
          channel: 3l
          subchannel: 3l_onZ
          tags:
          - bmask_atleast2m
          - ~fwdjet_mask
          histogram_variables:
            exclude:
            - ptz_wtau
            - tau0pt
        - name: 3l_m_offZ_low_1b
          channel: 3l_m
          subchannel: 3l_offZ_low
          tags:
          - bmask_exactly1m
          - ~fwdjet_mask
          histogram_variables:
            exclude:
            - ptz
            - ptz_wtau
            - tau0pt
        - name: 3l_m_offZ_high_1b
          channel: 3l_m
          subchannel: 3l_offZ_high
          tags:
          - bmask_exactly1m
          - ~fwdjet_mask
          histogram_variables:
            exclude:
            - ptz
            - ptz_wtau
            - tau0pt
        - name: 3l_m_offZ_none_1b
          channel: 3l_m
          subchannel: 3l_offZ_none
          tags:
          - bmask_exactly1m
          - ~fwdjet_mask
          histogram_variables:
            exclude:
            - ptz
            - ptz_wtau
            - tau0pt
        - name: 3l_m_offZ_low_2b
          channel: 3l_m
          subchannel: 3l_offZ_low
          tags:
          - bmask_atleast2m
          - ~fwdjet_mask
          histogram_variables:
            exclude:
            - ptz
            - ptz_wtau
            - tau0pt
        - name: 3l_m_offZ_high_2b
          channel: 3l_m
          subchannel: 3l_offZ_high
          tags:
          - bmask_atleast2m
          - ~fwdjet_mask
          histogram_variables:
            exclude:
            - ptz
            - ptz_wtau
            - tau0pt
        - name: 3l_m_offZ_none_2b
          channel: 3l_m
          subchannel: 3l_offZ_none
          tags:
          - bmask_atleast2m
          - ~fwdjet_mask
          histogram_variables:
            exclude:
            - ptz
            - ptz_wtau
            - tau0pt
        - name: 3l_p_offZ_low_1b
          channel: 3l_p
          subchannel: 3l_offZ_low
          tags:
          - bmask_exactly1m
          - ~fwdjet_mask
          histogram_variables:
            exclude:
            - ptz
            - ptz_wtau
            - tau0pt
        - name: 3l_p_offZ_high_1b
          channel: 3l_p
          subchannel: 3l_offZ_high
          tags:
          - bmask_exactly1m
          - ~fwdjet_mask
          histogram_variables:
            exclude:
            - ptz
            - ptz_wtau
            - tau0pt
        - name: 3l_p_offZ_none_1b
          channel: 3l_p
          subchannel: 3l_offZ_none
          tags:
          - bmask_exactly1m
          - ~fwdjet_mask
          histogram_variables:
            exclude:
            - ptz
            - ptz_wtau
            - tau0pt
        - name: 3l_p_offZ_low_2b
          channel: 3l_p
          subchannel: 3l_offZ_low
          tags:
          - bmask_atleast2m
          - ~fwdjet_mask
          histogram_variables:
            exclude:
            - ptz
            - ptz_wtau
            - tau0pt
        - name: 3l_p_offZ_high_2b
          channel: 3l_p
          subchannel: 3l_offZ_high
          tags:
          - bmask_atleast2m
          - ~fwdjet_mask
          histogram_variables:
            exclude:
            - ptz
            - ptz_wtau
            - tau0pt
        - name: 3l_p_offZ_none_2b
          channel: 3l_p
          subchannel: 3l_offZ_none
          tags:
          - bmask_atleast2m
          - ~fwdjet_mask
          histogram_variables:
            exclude:
            - ptz
            - ptz_wtau
            - tau0pt
        jet_bins:
        - =1
        - =2
        - =3
        - =4
        - '>5'
        application_tags:
          mc:
          - isSR_3l
          - isAR_3l
      - lepton_category: 3l_fwd
        lepton_flavors:
        - eee
        - eem
        - emm
        - mmm
        region_definitions:
        - name: 3l_onZ_1b_fwd
          channel: 3l
          subchannel: 3l_onZ
          tags:
          - bmask_exactly1m
          - fwdjet_mask
        - name: 3l_onZ_2b_fwd
          channel: 3l
          subchannel: 3l_onZ
          tags:
          - bmask_atleast2m
          - fwdjet_mask
        jet_bins:
        - =1
        - =2
        - =3
        - '>4'
        application_tags:
          mc:
          - isSR_3l
          - isAR_3l
      - lepton_category: 3l_offZ_fwd
        lepton_flavors:
        - eee
        - eem
        - emm
        - mmm
        region_definitions:
        - name: 3l_m_offZ_1b_fwd
          channel: 3l_m
          subchannel: 3l_offZ
          tags:
          - bmask_exactly1m
          - fwdjet_mask
        - name: 3l_p_offZ_1b_fwd
          channel: 3l_p
          subchannel: 3l_offZ
          tags:
          - bmask_exactly1m
          - fwdjet_mask
        - name: 3l_m_offZ_2b_fwd
          channel: 3l_m
          subchannel: 3l_offZ
          tags:
          - bmask_atleast2m
          - fwdjet_mask
        - name: 3l_p_offZ_2b_fwd
          channel: 3l_p
          subchannel: 3l_offZ
          tags:
          - bmask_atleast2m
          - fwdjet_mask
        jet_bins:
        - =1
        - =2
        - =3
        - '>4'
        application_tags:
          mc:
          - isSR_3l
          - isAR_3l
      - lepton_category: 4l
        lepton_flavors:
        - llll
        region_definitions:
        - name: 4l
          channel: 4l
          tags:
          - bmask_atleast1m2l
        jet_bins:
        - =2
        - =3
        - '>4'
        histogram_variables:
          exclude:
          - ptz
          - ptz_wtau
          - tau0pt
        application_tags:
          mc:
          - isSR_4l
